<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <p>
        请输入您要搜索的内容：<input type="text">
    </p>
</body>
</html>
<script>
    let input = document.querySelector('input')
    input.oninput = throttle(()=>{
        console.log("触发");
    },1000)


    // 防抖函数
    function debounce(cb,delayTime){
        // 创建存数定时器ID的变量
        let timer = null

        // 返回一个函数
        return function(){
            // 清理上一个timer
            clearTimeout(timer)
            // 在嵌套函数内使用上一层函数的变量，形成闭包
            timer = setTimeout(()=>{
                // 调用传入的回调
                cb()
            },delayTime)
        }
    }

    // 节流函数
    function throttle(cb, delayTime){
        // 设置一个节流阀(valve) 默认为false
        let valve = false

        return function (){
            // 触发事件时判断节流阀的状态，为false执行，true就不执行
            if(valve){
                return
            }else{
                // 进入此处说明valve为false，立马将其状态改变，表示打开节流阀
                valve = true
                // 开启定时器
                setTimeout(()=>{
                    // 将传入的cb回调执行,要注意此时this指向问题
                    cb.apply(this,arguments)
                    
                    // cb执行完毕后关闭节流阀
                    valve = false
                }, delayTime)
            }
        }
    }
</script>